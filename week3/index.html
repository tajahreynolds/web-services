<!-- TaJah Reynolds -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assignment 2/8</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>

<body>
    <p>Simple JavaScript program to add new entries to CSE451 key value pair api.</p>
    <form method="post" onsubmit="func()">
        <label for="key">Key:</label><br>
        <input type="text" id="key" name="key"><br>
        <label for="value">Value:</label><br>
        <input type="text" id="value" name="value"><br><br>
        <input type="submit">
    </form>
    
    <script>
        function func() {
            // stop form submit
            $("form").submit(function(e){
                e.preventDefault();
            });
            // checking if not null
            var key = $("#key")[0].value;
            var val = $("#value")[0].value;
            if (!key || !value) {
                console.error("Null value submitted")
            } else {

                // store key value pair in json string
                var data = JSON.stringify({"key":key,"value":val,"password":"test","uid":"campbest"});
                // set ajax parameters
                var settings = {
                  "url": "http://ceclnx01.cec.miamioh.edu/~campbest/cse451-campbest-web-public-2021/kv/kv.php/api/v1/info",
                  "method": "PUT",
                  "timeout": 0,
                  "headers": {
                    "Content-Type": "application/json"
                  },
                  "data": data,
                };
                // send data and process response
                $.ajax(settings).done(function (response) {
                  console.log(response);
                });

            }
        }
        
    </script>
</body>
</html>